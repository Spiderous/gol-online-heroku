(function(t){function e(e){for(var i,o,c=e[0],s=e[1],l=e[2],h=0,d=[];h<c.length;h++)o=c[h],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&d.push(n[o][0]),n[o]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i]);u&&u(e);while(d.length)d.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],i=!0,c=1;c<r.length;c++){var s=r[c];0!==n[s]&&(i=!1)}i&&(a.splice(e--,1),t=o(o.s=r[0]))}return t}var i={},n={app:0},a=[];function o(e){if(i[e])return i[e].exports;var r=i[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=i,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(r,i,function(e){return t[e]}.bind(null,i));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=s;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("cd49")},1:function(t,e){},"5c0b":function(t,e,r){"use strict";var i=r("9c0c"),n=r.n(i);n.a},"665b":function(t,e,r){},"9c0c":function(t,e,r){},c9ce:function(t,e,r){"use strict";var i=r("665b"),n=r.n(i);n.a},cd49:function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var i=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},a=[],o=(r("5c0b"),r("2877")),c={},s=Object(o["a"])(c,n,a,!1,null,null,null),l=s.exports,u=r("8c4f"),h=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"game"},[t.creatorOpen?r("section",{staticClass:"creator"},[r("h1",{staticClass:"creator-header"},[t._v("Kreator struktur")]),r("ul",{staticClass:"creator-grid"},t._l(t.patternCreator,(function(e,i){return r("ul",{key:i,staticClass:"grid-row"},t._l(t.patternCreator[i],(function(e,n){return r("ul",{key:n,staticClass:"grid-col"},[r("li",{staticClass:"grid-cell",class:t.patternCreator[i][n]?"activated":"",on:{click:function(e){return t.$set(t.patternCreator[i],n,t.patternCreator[i][n]?0:1)}}})])})),0)})),0),r("div",{staticClass:"creator-actions"},[r("button",{staticClass:"action_choose-pattern",on:{click:function(e){t.creatorOpen=!1,t.placingPattern=!0}}},[t._v("Dodaj strukturę")]),r("button",{staticClass:"action_close-creator",on:{click:function(e){t.creatorOpen=!1,t.placingPattern=!1}}},[t._v("Wyjdź z kreatora")])])]):t._e(),r("main",{staticClass:"main-content"},[r("div",{staticClass:"game-wrapper"},[r("div",{staticClass:"floating-actions"},[r("button",{staticClass:"action_open-creator",on:{click:function(e){t.creatorOpen=!t.creatorOpen}}},[t._v(t._s(t.creatorOpen?"Zamknij kreator":"Otwórz kreator"))])]),r("canvas",{ref:"canvas",on:{mousemove:t.mouseMove,click:t.canvasClick}})])])])},d=[],p=(r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b"),r("ade3")),f=r("d4ec"),v=r("bee2"),g=r("99de"),m=r("7e84"),C=r("262e"),b=r("9ab4"),y=r("60a3"),k=r("8055"),O=r.n(k);function S(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function w(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?S(Object(r),!0).forEach((function(e){Object(p["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var G=function(t){function e(){var t;return Object(f["a"])(this,e),t=Object(g["a"])(this,Object(m["a"])(e).apply(this,arguments)),t.patternCreator=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],t.creatorOpen=!1,t.placingPattern=!1,t.mouseCursor={overCell:{col:-1,row:-1}},t.isDev=!1,t.devPort=2e3,t.canvasRatio=16/9,t}return Object(C["a"])(e,t),Object(v["a"])(e,[{key:"created",value:function(){this.socket=O()(this.isDev?"http://localhost:".concat(this.devPort):""),this.handleSocketConnection()}},{key:"mounted",value:function(){this.context=this.$refs.canvas.getContext("2d")}},{key:"handleSocketConnection",value:function(){var t=this;this.socket.on("init_pack",(function(e){t.gameGrid=w({},e),t.canvasWidth=e.cellSize*e.dimensions.cols,t.canvasHeight=e.cellSize*e.dimensions.rows,t.context.canvas.width=t.canvasWidth,t.context.canvas.height=t.canvasHeight,t.renderGame()})),this.socket.on("update_pack",(function(e){t.gameGrid.currentGen=e.currentGen,t.gameGrid.currentIteration=e.currentIteration}))}},{key:"resizeCanvas",value:function(){this.canvasWidth=.7*window.innerWidth,this.canvasHeight=this.canvasWidth/this.canvasRatio,this.context.canvas.width=this.canvasWidth,this.context.canvas.height=this.canvasHeight}},{key:"mouseMove",value:function(t){var e=this.context.canvas.getBoundingClientRect();this.mouseCursor.overCell.col=Math.floor((t.pageX-e.left)/this.gameGrid.cellSize),this.mouseCursor.overCell.row=Math.floor((t.pageY-e.top)/this.gameGrid.cellSize)}},{key:"canvasClick",value:function(t){!this.creatorOpen&&this.placingPattern&&(this.socket.emit("create_pattern",{pattern:this.patternCreator,offsetRow:this.mouseCursor.overCell.row-2,offsetCol:this.mouseCursor.overCell.col-2}),this.patternCreator=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],this.placingPattern=!1)}},{key:"changeCreatorCellState",value:function(t,e){this.$set(this.patternCreator[t],e,this.patternCreator[t][e]?0:1)}},{key:"renderGame",value:function(){this.context.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.context.lineWidth=1,this.context.strokeStyle="gray";for(var t=0;t<this.gameGrid.dimensions.cols;t++)for(var e=0;e<this.gameGrid.dimensions.rows;e++){var r=this.gameGrid.currentGen[t][e];this.context.fillStyle=r?"black":"white",this.context.fillRect(t*this.gameGrid.cellSize,e*this.gameGrid.cellSize,this.gameGrid.cellSize,this.gameGrid.cellSize),this.context.strokeRect(t*this.gameGrid.cellSize,e*this.gameGrid.cellSize,this.gameGrid.cellSize,this.gameGrid.cellSize)}if(this.creatorOpen||this.placingPattern||(this.context.lineWidth=3,this.context.strokeStyle="red",this.context.strokeRect(this.mouseCursor.overCell.col*this.gameGrid.cellSize,this.mouseCursor.overCell.row*this.gameGrid.cellSize,this.gameGrid.cellSize,this.gameGrid.cellSize)),this.placingPattern){this.context.fillStyle="green";for(var i=0;i<this.patternCreator.length;i++)for(var n=0;n<this.patternCreator.length;n++)this.patternCreator[i][n]&&this.context.fillRect((this.mouseCursor.overCell.col+n-2)*this.gameGrid.cellSize,(this.mouseCursor.overCell.row+i-2)*this.gameGrid.cellSize,this.gameGrid.cellSize,this.gameGrid.cellSize);this.context.strokeStyle="black",this.context.lineWidth=2,this.context.strokeRect((this.mouseCursor.overCell.col-2)*this.gameGrid.cellSize,(this.mouseCursor.overCell.row-2)*this.gameGrid.cellSize,5*this.gameGrid.cellSize,5*this.gameGrid.cellSize)}requestAnimationFrame(this.renderGame)}},{key:"fillRect",value:function(t,e,r,i,n){this.context.fillStyle=n,this.context.fillRect(t,e,r,i)}},{key:"strokeRect",value:function(t,e,r,i,n){this.context.fillStyle=n,this.context.strokeRect(t,e,r,i)}}]),e}(y["b"]);G=b["a"]([y["a"]],G);var x=G,j=x,z=(r("c9ce"),Object(o["a"])(j,h,d,!1,null,"5970f0ca",null)),P=z.exports;i["a"].use(u["a"]);var _=[{path:"/",name:"home",component:P}],R=new u["a"]({routes:_}),W=R,M=r("2f62");i["a"].use(M["a"]);var D=new M["a"].Store({state:{},mutations:{},actions:{},modules:{}});i["a"].config.productionTip=!1,new i["a"]({router:W,store:D,render:function(t){return t(l)}}).$mount("#app")}});
//# sourceMappingURL=app.c3595583.js.map